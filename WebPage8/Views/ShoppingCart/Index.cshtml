@model ShoppingCartViewModel
@{
    ViewBag.Title = "Computer Web Shop | Your Cart";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section headerSection {
    @Html.Partial("_LayoutHeader")
}

<style>

    .text-success {
        color: #62cb31!important;
    }
</style>
@*<table class="table table-striped">
        <thead class="table-dark">
            <tr>
                <th>Selected amount</th>
                <th>Computer</th>
                <th>Price</th>
                <th>sub total</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.ShoppingCart.ShoppingCartItems)
            {
            <tr>
                <td hidden name="computerId">@item.ComputerId</td>
                <td>@item.Quantity</td>
                <td>@item.Computer.Name</td>
                <td>@item.Computer.Price</td>
                <td>@item.Quantity * item.Computer.Price</td>
                <td><a asp-controller="ShoppingCart" asp-action="RemoveFromShoppingCart" asp-route-computerId="@item.ComputerId">Remove</a></td>
            </tr>
                this.TempData["data"] = @item.ComputerId;
            }
        </tbody>
        <tfoot>
            <tr>
                <td colspan="3" class="text-right">Total : </td>
                <td class="text-right">@Model.ShoppingCartTotal</td>
            </tr>
        </tfoot>
    </table>

    <caption>List of orderd computers</caption>

    <div>
            <p class="button">
                <a class="btn btn-success" asp-controller="Product" asp-action="Detail" asp-route-ComputerId="@this.TempData["data"]" >
                    Back
                </a>
            </p>

        </div>

    <div>
        <p class="button"></p>
        <a asp-controller="Checkout" asp-action="Create" class="btn btn-success">
            Betala
        </a>
    </div>*@

<section>
    <div class="container sectionspc">
        <div class="row">
            <div class="col-lg-12">
                <div class="hpanel">
                    <div class="panel-heading m-b-sm">

                        <h4> Shopping Cart</h4>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <table id="example2" class="table table-striped table-bordered table-hover dataTable no-footer" role="grid" aria-describedby="example2_info">
                                <thead>
                                    <tr role="row">
                                        <th>Selected Amount</th>
                                        <th>Computer</th>
                                        <th>Price</th>
                                        <th>SubTotal </th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in Model.ShoppingCart.ShoppingCartItems)
                                    {
                                    <tr role="row" class="odd">
                                        <td><strong>@item.Quantity</strong></td>
                                        <td>@item.Computer.Name</td>
                                        <td><h5 class="font-bold">@item.Computer.Price Kr</h5></td>
                                        <td><h5 class="font-extra-bold text-success">@item.Quantity * @item.Computer.Price</h5></td>
                                        <td><a asp-controller="ShoppingCart" asp-action="RemoveFromShoppingCart" asp-route-computerId="@item.ComputerId">Remove</a></td>
                                    </tr>
                                    }

                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="4" class="text-right">Total : </td>
                                        <td class="text-right">@Model.ShoppingCartTotal</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                    <div id="showError" class="container-fluid m-2" none>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="col-sm-6 text-right">
                    <a asp-controller="Home" asp-action="Index">
                        <button type="button" onclick="goBack()" class="btn w-xs btn-info">Back</button>
                    </a>
                </div>
                @{
                    if (@Model.ShoppingCartTotal != 0)
                    {
                        <div class="col-sm-6 text-left">
                            <a asp-controller="Checkout" asp-action="Create">
                                <button type="button" class="btn w-xs btn-success">Betala</button>
                            </a>
                        </div>
                    }
                    else
                    {
                        <button type="button" class="btn w-xs btn-success" id="btnPaymentNull" onclick="showDiv()">Betala</button>
                    }
                }
            </div>
        </div>
    </div>
</section>

<script>
function goBack() {
  window.history.back();
    }

function showDiv() {
    var x = document.getElementById("showError");
    x.style.display = "block";
}

</script>